{"ast":null,"code":"import _slicedToArray from\"/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import axios from'axios';import{saveProduct,listProducts,deleteProduct}from'../actions/productActions';function ProductsScreen(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalVisible=_useState2[0],setModalVisible=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),id=_useState4[0],setId=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),image=_useState10[0],setImage=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),brand=_useState12[0],setBrand=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),category=_useState14[0],setCategory=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),countInStock=_useState16[0],setCountInStock=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),description=_useState18[0],setDescription=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),uploading=_useState20[0],setUploading=_useState20[1];var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,products=productList.products,error=productList.error;var productSave=useSelector(function(state){return state.productSave;});var loadingSave=productSave.loading,successSave=productSave.success,errorSave=productSave.error;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,successDelete=productDelete.success,errorDelete=productDelete.error;var dispatch=useDispatch();useEffect(function(){if(successSave){setModalVisible(false);}dispatch(listProducts());return function(){//\n};},[successSave,successDelete]);var openModal=function openModal(product){setModalVisible(true);setId(product._id);setName(product.product_name);setPrice(product.product_price);setDescription(product.product_description);setImage(product.image);setBrand(product.brand);setCategory(product.category_id);setCountInStock(product.countInStock);};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(saveProduct({_id:id,name:name,price:price,image:image,brand:brand,category:category,countInStock:countInStock,description:description}));};var deleteHandler=function deleteHandler(product){dispatch(deleteProduct(product._id));};var uploadFileHandler=function uploadFileHandler(e){var file=e.target.files[0];var bodyFormData=new FormData();bodyFormData.append('image',file);setUploading(true);axios.post('/api/uploads/s3',bodyFormData,{headers:{'Content-Type':'multipart/form-data'}}).then(function(response){setImage(response.data);setUploading(false);}).catch(function(err){console.log(err);setUploading(false);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"content content-margined\"},/*#__PURE__*/React.createElement(\"div\",{className:\"product-header\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Products Manager\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:function onClick(){return openModal({});}},\"Create Product\")),modalVisible&&/*#__PURE__*/React.createElement(\"div\",{className:\"ps-contact ps-contact--2 ps-section pt-80 pb-80\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ps-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6 col-md-6 col-sm-12 col-xs-12 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"ps-section__header pt-50\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"ps-section__title\",\"data-mask\":\"CHIKOIQUAN\"},\"- Create Product\"),/*#__PURE__*/React.createElement(\"form\",{className:\"ps-contact__form\",onSubmit:submitHandler,method:\"post\"},loadingSave&&/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"),errorSave&&/*#__PURE__*/React.createElement(\"div\",null,errorSave),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Name \",/*#__PURE__*/React.createElement(\"sub\",null,\"*\")),/*#__PURE__*/React.createElement(\"input\",{value:name,required:true,name:\"name\",id:\"name\",className:\"form-control\",onChange:function onChange(e){return setName(e.target.value);},type:\"text\",placeholder:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"price \",/*#__PURE__*/React.createElement(\"sub\",null,\"*\")),/*#__PURE__*/React.createElement(\"input\",{value:price,required:true,name:\"price\",id:\"price\",className:\"form-control\",onChange:function onChange(e){return setPrice(e.target.value);},type:\"text\",placeholder:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-25\"},/*#__PURE__*/React.createElement(\"label\",null,\"image \",/*#__PURE__*/React.createElement(\"sub\",null,\"*\")),/*#__PURE__*/React.createElement(\"input\",{value:image,required:true,name:\"image\",id:\"image\",className:\"form-control\",onChange:function onChange(e){return setImage(e.target.value);},type:\"text\",placeholder:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-25\"},/*#__PURE__*/React.createElement(\"label\",null,\"brand \",/*#__PURE__*/React.createElement(\"sub\",null,\"*\")),/*#__PURE__*/React.createElement(\"input\",{value:brand,required:true,name:\"brand\",id:\"brand\",className:\"form-control\",onChange:function onChange(e){return setBrand(e.target.value);},type:\"text\",placeholder:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-25\"},/*#__PURE__*/React.createElement(\"label\",null,\"countInStock \",/*#__PURE__*/React.createElement(\"sub\",null,\"*\")),/*#__PURE__*/React.createElement(\"input\",{value:countInStock,required:true,name:\"countInStock\",id:\"countInStock\",className:\"form-control\",onChange:function onChange(e){return setCountInStock(e.target.value);},type:\"text\",placeholder:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-25\"},/*#__PURE__*/React.createElement(\"label\",null,\"category \",/*#__PURE__*/React.createElement(\"sub\",null,\"*\")),/*#__PURE__*/React.createElement(\"input\",{value:category,required:true,name:\"category\",id:\"category\",className:\"form-control\",onChange:function onChange(e){return setCategory(e.target.value);},type:\"text\",placeholder:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mb-25\"},/*#__PURE__*/React.createElement(\"label\",null,\"description \",/*#__PURE__*/React.createElement(\"sub\",null,\"*\")),/*#__PURE__*/React.createElement(\"input\",{value:description,required:true,name:\"description\",id:\"description\",className:\"form-control\",onChange:function onChange(e){return setDescription(e.target.value);},type:\"text\",placeholder:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-success\"},id?'Update':'Create',\" \",/*#__PURE__*/React.createElement(\"i\",{className:\"ps-icon-next\"}))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return setModalVisible(false);},className:\"btn btn-info\"},\"Back\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"product-list\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Price\"),/*#__PURE__*/React.createElement(\"th\",null,\"Category\"),/*#__PURE__*/React.createElement(\"th\",null,\"Brand\"),/*#__PURE__*/React.createElement(\"th\",null,\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.product_name),/*#__PURE__*/React.createElement(\"td\",null,product.product_price),/*#__PURE__*/React.createElement(\"td\",null,product.category_id),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn btn-primary\",onClick:function onClick(){return openModal(product);}},\"Edit\"),' ',/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn btn-danger\",onClick:function onClick(){return deleteHandler(product);}},\"Delete\")));})))));}export default ProductsScreen;","map":{"version":3,"sources":["/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/src/screens/ProductsScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","saveProduct","listProducts","deleteProduct","ProductsScreen","props","modalVisible","setModalVisible","id","setId","name","setName","price","setPrice","image","setImage","brand","setBrand","category","setCategory","countInStock","setCountInStock","description","setDescription","uploading","setUploading","productList","state","loading","products","error","productSave","loadingSave","successSave","success","errorSave","productDelete","loadingDelete","successDelete","errorDelete","dispatch","openModal","product","_id","product_name","product_price","product_description","category_id","submitHandler","e","preventDefault","deleteHandler","uploadFileHandler","file","target","files","bodyFormData","FormData","append","post","headers","then","response","data","catch","err","console","log","value","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport {\n  saveProduct,\n  listProducts,\n  deleteProduct,\n} from '../actions/productActions';\n\nfunction ProductsScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [image, setImage] = useState('');\n  const [brand, setBrand] = useState('');\n  const [category, setCategory] = useState('');\n  const [countInStock, setCountInStock] = useState('');\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const productList = useSelector((state) => state.productList);\n  const { loading, products, error } = productList;\n\n  const productSave = useSelector((state) => state.productSave);\n  const {\n    loading: loadingSave,\n    success: successSave,\n    error: errorSave,\n  } = productSave;\n\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    error: errorDelete,\n  } = productDelete;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (successSave) {\n      setModalVisible(false);\n    }\n    dispatch(listProducts());\n    return () => {\n      //\n    };\n  }, [successSave, successDelete]);\n\n  const openModal = (product) => {\n    setModalVisible(true);\n    setId(product._id);\n    setName(product.product_name);\n    setPrice(product.product_price);\n    setDescription(product.product_description);\n    setImage(product.image);\n    setBrand(product.brand);\n    setCategory(product.category_id);\n    setCountInStock(product.countInStock);\n  };\n  const submitHandler = (e) => {\n    (e).preventDefault();\n    dispatch(saveProduct({ _id: id, name, price, image, brand, category, countInStock, description }));\n  }\n\n  const deleteHandler = (product) => {\n\n    dispatch(deleteProduct(product._id));\n  };\n  const uploadFileHandler = (e) => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    setUploading(true);\n    axios\n      .post('/api/uploads/s3', bodyFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n      .then((response) => {\n        setImage(response.data);\n        setUploading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n        setUploading(false);\n      });\n  };\n  return (\n    <div className=\"content content-margined\">\n      <div className=\"product-header\">\n        <h3>Products Manager</h3>\n        <br /><br />\n        <button className=\"btn btn-success\" onClick={() => openModal({})}>\n          Create Product\n        </button>\n      </div>\n      {modalVisible && (\n        <div className=\"ps-contact ps-contact--2 ps-section pt-80 pb-80\">\n          <div className=\"ps-container\">\n            <div className=\"row\">\n              <div className=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 \">\n                <div className=\"ps-section__header pt-50\">\n                  <h2 className=\"ps-section__title\" data-mask=\"CHIKOIQUAN\">\n                    - Create Product\n          </h2>\n                  <form className=\"ps-contact__form\" onSubmit={submitHandler} method=\"post\">\n                    {loadingSave && <div>Loading...</div>}\n                    {errorSave && <div>{errorSave}</div>}\n                    <div className=\"form-group\">\n                      <label>\n                        Name <sub>*</sub>\n                      </label>\n                      <input value={name} required name=\"name\" id=\"name\" className=\"form-control\" onChange={(e) => setName(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group\">\n                      <label>\n                        price <sub>*</sub>\n                      </label>\n                      <input value={price} required name=\"price\" id=\"price\" className=\"form-control\" onChange={(e) => setPrice(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group mb-25\">\n                      <label>\n                        image <sub>*</sub>\n                      </label>\n                      <input value={image} required name=\"image\" id=\"image\" className=\"form-control\" onChange={(e) => setImage(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group mb-25\">\n                      <label>\n                        brand <sub>*</sub>\n                      </label>\n                      <input value={brand} required name=\"brand\" id=\"brand\" className=\"form-control\" onChange={(e) => setBrand(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group mb-25\">\n                      <label>\n                        countInStock <sub>*</sub>\n                      </label>\n                      <input value={countInStock} required name=\"countInStock\" id=\"countInStock\" className=\"form-control\" onChange={(e) => setCountInStock(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group mb-25\">\n                      <label>\n                        category <sub>*</sub>\n                      </label>\n                      <input value={category} required name=\"category\" id=\"category\" className=\"form-control\" onChange={(e) => setCategory(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group mb-25\">\n                      <label>\n                        description <sub>*</sub>\n                      </label>\n                      <input value={description} required name=\"description\" id=\"description\" className=\"form-control\" onChange={(e) => setDescription(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group\">\n                      <button type=\"submit\" className=\"btn btn-success\">\n                        {id ? 'Update' : 'Create'} <i className=\"ps-icon-next\" />\n                      </button>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => setModalVisible(false)}\n                      className=\"btn btn-info\"\n                    >\n                      Back\n                </button>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      }\n\n      <div className=\"product-list\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Name</th>\n              <th>Price</th>\n              <th>Category</th>\n              <th>Brand</th>\n              <th>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {products.map((product) => (\n              <tr key={product._id}>\n                <td>{product._id}</td>\n                <td>{product.product_name}</td>\n                <td>{product.product_price}</td>\n                <td>{product.category_id}</td>\n                <td>{product.brand}</td>\n                <td>\n                  <button\n                    className=\"btn btn btn-primary\" onClick={() => openModal(product)}\n                  >\n                    Edit\n                  </button>{' '}\n                  <button\n                    className=\"btn btn btn-danger\"\n                    onClick={() => deleteHandler(product)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\nexport default ProductsScreen;\n"]},"metadata":{},"sourceType":"module"}