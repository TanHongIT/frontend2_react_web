{"ast":null,"code":"import _defineProperty from\"/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect,useState}from'react';import{addToCart,removeFromCart}from'../actions/cartAction';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';function CartScreen(props){var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var productId=props.match.params.id;var qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;var dispatch=useDispatch();var total_price=0;var removeFromCartHandler=function removeFromCartHandler(productId){dispatch(removeFromCart(productId));};useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[]);var checkoutHandler=function checkoutHandler(){props.history.push('/signin?redirect=shipping');};return/*#__PURE__*/React.createElement(\"div\",{className:\"ps-content pt-80 pb-80\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ps-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ps-cart-listing\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table ps-cart__table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"All Products\"),/*#__PURE__*/React.createElement(\"th\",null,\"Price\"),/*#__PURE__*/React.createElement(\"th\",null,\"Quantity\"),/*#__PURE__*/React.createElement(\"th\",null,\"Total\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(function(item){var _React$createElement;return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"a\",{className:\"ps-product__preview\",href:\"product-detail.html\"},/*#__PURE__*/React.createElement(\"img\",{width:\"50\",className:\"mr-15\",src:\"/images/products/\"+item.image,alt:true}),\" \",item.name)),/*#__PURE__*/React.createElement(\"td\",null,item.price,\" \\u0110\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group--number\"},/*#__PURE__*/React.createElement(\"select\",{value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,e.target.value));}},_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1);})),/*#__PURE__*/React.createElement(\"input\",(_React$createElement={title:\"Nh\\u1EADp \\u0110\\u1EC3 \\u0110\\u1ED5i S\\u1ED1 L\\u01B0\\u1EE3ng\",type:\"number\",className:\"form-control\"},_defineProperty(_React$createElement,\"type\",\"text\"),_defineProperty(_React$createElement,\"value\",item.qty<=item.countInStock?item.qty:'1'),_defineProperty(_React$createElement,\"onChange\",function onChange(e){return dispatch(addToCart(item.product,e.target.value));}),_defineProperty(_React$createElement,\"min\",\"1\"),_defineProperty(_React$createElement,\"step\",\"1\"),_defineProperty(_React$createElement,\"max\",item.countInStock),_React$createElement)),\" In stock: \",item.countInStock)),/*#__PURE__*/React.createElement(\"td\",null,item.qty<=item.countInStock?item.qty*item.price:item.price,\" \\u0110\"),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"ps-remove\",onClick:function onClick(){return removeFromCartHandler(item.product);}})));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"ps-cart__actions\"},/*#__PURE__*/React.createElement(\"div\",{className:\"ps-cart__promotion\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"a\",{href:\"/\",className:\"ps-btn ps-btn--gray\"},\"Continue Shopping\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"ps-cart__total\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Total Price: \",/*#__PURE__*/React.createElement(\"span\",null,\" \",cartItems.reduce(function(a,c){return c.qty<=c.countInStock?a+c.price*c.qty:a+c.price;},0))),/*#__PURE__*/React.createElement(\"button\",{onClick:checkoutHandler,className:\"ps-btn\",disabled:cartItems.length===0},\"Proceed to Checkout \",/*#__PURE__*/React.createElement(\"i\",{className:\"ps-icon-next\"})))))));}export default CartScreen;","map":{"version":3,"sources":["/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","useState","addToCart","removeFromCart","Link","useDispatch","useSelector","CartScreen","props","cart","state","cartItems","productId","match","params","id","qty","location","search","Number","split","dispatch","total_price","removeFromCartHandler","checkoutHandler","history","push","length","map","item","image","name","price","e","product","target","value","Array","countInStock","keys","x","reduce","a","c"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { addToCart, removeFromCart } from '../actions/cartAction';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\n\nfunction CartScreen(props) {\n\n  const cart = useSelector(state => state.cart);\n\n  const { cartItems } = cart;\n\n  const productId = props.match.params.id;\n  const qty = props.location.search ? Number(props.location.search.split(\"=\")[1]) : 1\n  const dispatch = useDispatch();\n  const total_price = 0;\n  const removeFromCartHandler = (productId) => {\n    dispatch(removeFromCart(productId));\n  }\n\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, []);\n\n  const checkoutHandler = () => {\n    props.history.push('/signin?redirect=shipping');\n  }\n\n  return <div className=\"ps-content pt-80 pb-80\">\n    <div className=\"ps-container\">\n      <div className=\"ps-cart-listing\">\n        <table className=\"table ps-cart__table\">\n          <thead>\n            <tr>\n              <th>All Products</th>\n              <th>Price</th>\n              <th>Quantity</th>\n              <th>Total</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {\n              cartItems.length === 0 ?\n                <div>\n                  Cart is empty\n          </div>\n                :\n                cartItems.map(item =>\n\n                  <tr>\n                    <td>\n                      <a className=\"ps-product__preview\" href=\"product-detail.html\">\n                        <img\n                          width='50'\n                          className=\"mr-15\"\n                          src={\"/images/products/\" + item.image}\n                          alt\n                        />{\" \"}\n                        {item.name}\n                      </a>\n                    </td>\n                    <td>{item.price} Đ</td>\n                    <td>\n\n                      <div className=\"form-group--number\">\n                        <select value={item.qty} onChange={(e) => dispatch(addToCart(item.product, e.target.value))}>\n                          {[...Array(item.countInStock).keys()].map(x =>\n                            <option key={x + 1} value={x + 1}>{x + 1}</option>\n                          )}\n                        </select>\n                        <input title=\"Nhập Để Đổi Số Lượng\" type='number' className=\"form-control\" type=\"text\" value={item.qty <= item.countInStock ? item.qty : '1'} onChange={(e) => dispatch(addToCart(item.product, e.target.value))} min=\"1\" step=\"1\" max={item.countInStock} /> In stock: {item.countInStock}\n                      </div>\n\n                    </td>\n                    <td>{item.qty <= item.countInStock ? item.qty * item.price : item.price} Đ</td>\n                    <td>\n                      <button className=\"ps-remove\" onClick={() => removeFromCartHandler(item.product)}></button>\n                    </td>\n                  </tr>\n\n                )\n            }\n          </tbody>\n        </table>\n        <div className=\"ps-cart__actions\">\n          <div className=\"ps-cart__promotion\">\n            <div className=\"form-group\">\n\n            </div>\n            <div className=\"form-group\">\n              <a href='/' className=\"ps-btn ps-btn--gray\">Continue Shopping</a>\n            </div>\n          </div>\n          <div className=\"ps-cart__total\">\n            <h3>\n              Total Price: <span> {cartItems.reduce((a, c) => c.qty <= c.countInStock ? a + c.price * c.qty : a + c.price, 0)}</span>\n            </h3>\n            <button onClick={checkoutHandler} className=\"ps-btn\" disabled={cartItems.length === 0}>\n              Proceed to Checkout <i className=\"ps-icon-next\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>;\n\n}\nexport default CartScreen;\n"]},"metadata":{},"sourceType":"module"}