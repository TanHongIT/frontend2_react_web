{"ast":null,"code":"var _jsxFileName = \"/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/src/screens/ProductsScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport { saveProduct, listProducts, deleteProduct } from '../actions/productActions';\n\nfunction ProductsScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [image, setImage] = useState('');\n  const [brand, setBrand] = useState('');\n  const [category, setCategory] = useState('');\n  const [countInStock, setCountInStock] = useState('');\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const productList = useSelector(state => state.productList);\n  const {\n    loading,\n    products,\n    error\n  } = productList;\n  const productSave = useSelector(state => state.productSave);\n  const {\n    loading: loadingSave,\n    success: successSave,\n    error: errorSave\n  } = productSave;\n  const productDelete = useSelector(state => state.productDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    error: errorDelete\n  } = productDelete;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successSave) {\n      setModalVisible(false);\n    }\n\n    dispatch(listProducts());\n    return () => {//\n    };\n  }, [successSave, successDelete]);\n\n  const openModal = product => {\n    setModalVisible(true);\n    setId(product._id);\n    setName(product.product_name);\n    setPrice(product.product_price);\n    setDescription(product.product_description);\n    setImage(product.image);\n    setBrand(product.brand);\n    setCategory(product.category_id);\n    setCountInStock(product.countInStock);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(saveProduct({\n      _id: id,\n      name,\n      price,\n      image,\n      brand,\n      category,\n      countInStock,\n      description\n    }));\n  };\n\n  const deleteHandler = product => {\n    dispatch(deleteProduct(product._id));\n  };\n\n  const uploadFileHandler = e => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    setUploading(true);\n    axios.post('/api/uploads/s3', bodyFormData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      setImage(response.data);\n      setUploading(false);\n    }).catch(err => {\n      console.log(err);\n      setUploading(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content content-margined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"Products\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button primary\",\n    onClick: () => openModal({}),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, \"Create Product\")), modalVisible && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ps-contact ps-contact--2 ps-section pt-80 pb-80\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ps-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6 col-md-6 col-sm-12 col-xs-12 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ps-section__header pt-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"ps-section__title\",\n    \"data-mask\": \"CHIKOIQUAN\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 19\n    }\n  }, \"- Create Product\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"ps-contact__form\",\n    onSubmit: submitHandler,\n    method: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 23\n    }\n  }, \"Name \", /*#__PURE__*/React.createElement(\"sub\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 30\n    }\n  }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    name: \"name\",\n    id: \"name\",\n    className: \"form-control\",\n    onChange: e => setName(e.target.value),\n    type: \"text\",\n    placeholder: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 23\n    }\n  }, \"price \", /*#__PURE__*/React.createElement(\"sub\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 31\n    }\n  }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    name: \"price\",\n    id: \"price\",\n    className: \"form-control\",\n    onChange: e => setPrice(e.target.value),\n    type: \"text\",\n    placeholder: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 23\n    }\n  }, \"Password \", /*#__PURE__*/React.createElement(\"sub\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 34\n    }\n  }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    name: \"password\",\n    id: \"password\",\n    className: \"form-control\",\n    onChange: e => setImage(e.target.value),\n    type: \"text\",\n    placeholder: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-25\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 23\n    }\n  }, \"Password \", /*#__PURE__*/React.createElement(\"sub\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 34\n    }\n  }, \"*\")), /*#__PURE__*/React.createElement(\"input\", {\n    required: true,\n    name: \"rePassword\",\n    id: \"rePassword\",\n    className: \"form-control\",\n    onChange: e => setBrand(e.target.value),\n    type: \"password\",\n    placeholder: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"ps-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 23\n    }\n  }, \"Register \", /*#__PURE__*/React.createElement(\"i\", {\n    className: \"ps-icon-next\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 34\n    }\n  }))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"product-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, \"Brand\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, \"Action\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, products.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n    key: product._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, product._id), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, product.product_name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, product.product_price), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, product.category_id), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, product.brand), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn btn-primary\",\n    onClick: () => openModal(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, \"Edit\"), ' ', /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn btn-danger\",\n    onClick: () => deleteHandler(product),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 19\n    }\n  }, \"Delete\"))))))));\n}\n\nexport default ProductsScreen;","map":{"version":3,"sources":["/home/tanhong/REACT PROJECT/frontend2_react_web/frontend/src/screens/ProductsScreen.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","saveProduct","listProducts","deleteProduct","ProductsScreen","props","modalVisible","setModalVisible","id","setId","name","setName","price","setPrice","image","setImage","brand","setBrand","category","setCategory","countInStock","setCountInStock","description","setDescription","uploading","setUploading","productList","state","loading","products","error","productSave","loadingSave","success","successSave","errorSave","productDelete","loadingDelete","successDelete","errorDelete","dispatch","openModal","product","_id","product_name","product_price","product_description","category_id","submitHandler","e","preventDefault","deleteHandler","uploadFileHandler","file","target","files","bodyFormData","FormData","append","post","headers","then","response","data","catch","err","console","log","value","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport {\n  saveProduct,\n  listProducts,\n  deleteProduct,\n} from '../actions/productActions';\n\nfunction ProductsScreen(props) {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [id, setId] = useState('');\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState('');\n  const [image, setImage] = useState('');\n  const [brand, setBrand] = useState('');\n  const [category, setCategory] = useState('');\n  const [countInStock, setCountInStock] = useState('');\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const productList = useSelector((state) => state.productList);\n  const { loading, products, error } = productList;\n\n  const productSave = useSelector((state) => state.productSave);\n  const {\n    loading: loadingSave,\n    success: successSave,\n    error: errorSave,\n  } = productSave;\n\n  const productDelete = useSelector((state) => state.productDelete);\n  const {\n    loading: loadingDelete,\n    success: successDelete,\n    error: errorDelete,\n  } = productDelete;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (successSave) {\n      setModalVisible(false);\n    }\n    dispatch(listProducts());\n    return () => {\n      //\n    };\n  }, [successSave, successDelete]);\n\n  const openModal = (product) => {\n    setModalVisible(true);\n    setId(product._id);\n    setName(product.product_name);\n    setPrice(product.product_price);\n    setDescription(product.product_description);\n    setImage(product.image);\n    setBrand(product.brand);\n    setCategory(product.category_id);\n    setCountInStock(product.countInStock);\n  };\n  const submitHandler = (e) => {\n    (e).preventDefault();\n    dispatch(saveProduct({ _id: id, name, price, image, brand, category, countInStock, description }));\n  }\n\n  const deleteHandler = (product) => {\n\n    dispatch(deleteProduct(product._id));\n  };\n  const uploadFileHandler = (e) => {\n    const file = e.target.files[0];\n    const bodyFormData = new FormData();\n    bodyFormData.append('image', file);\n    setUploading(true);\n    axios\n      .post('/api/uploads/s3', bodyFormData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      })\n      .then((response) => {\n        setImage(response.data);\n        setUploading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n        setUploading(false);\n      });\n  };\n  return (\n    <div className=\"content content-margined\">\n      <div className=\"product-header\">\n        <h3>Products</h3>\n        <button className=\"button primary\" onClick={() => openModal({})}>\n          Create Product\n        </button>\n      </div>\n      {modalVisible && (\n        <div className=\"ps-contact ps-contact--2 ps-section pt-80 pb-80\">\n          <div className=\"ps-container\">\n            <div className=\"row\">\n              <div className=\"col-lg-6 col-md-6 col-sm-12 col-xs-12 \">\n                <div className=\"ps-section__header pt-50\">\n                  <h2 className=\"ps-section__title\" data-mask=\"CHIKOIQUAN\">\n                    - Create Product\n          </h2>\n                  <form className=\"ps-contact__form\" onSubmit={submitHandler} method=\"post\">\n                    <div className=\"form-group\">\n                      <label>\n                        Name <sub>*</sub>\n                      </label>\n                      <input required name=\"name\" id=\"name\" className=\"form-control\" onChange={(e) => setName(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group\">\n                      <label>\n                        price <sub>*</sub>\n                      </label>\n                      <input required name=\"price\" id=\"price\" className=\"form-control\" onChange={(e) => setPrice(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group mb-25\">\n                      <label>\n                        Password <sub>*</sub>\n                      </label>\n                      <input required name=\"password\" id=\"password\" className=\"form-control\" onChange={(e) => setImage(e.target.value)} type=\"text\" placeholder />\n                    </div>\n                    <div className=\"form-group mb-25\">\n                      <label>\n                        Password <sub>*</sub>\n                      </label>\n                      <input required name=\"rePassword\" id=\"rePassword\" className=\"form-control\" onChange={(e) => setBrand(e.target.value)} type=\"password\" placeholder />\n                    </div>\n                    <div className=\"form-group\">\n                      <button type=\"submit\" className=\"ps-btn\">\n                        Register <i className=\"ps-icon-next\" />\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n      }\n\n      <div className=\"product-list\">\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Name</th>\n              <th>Price</th>\n              <th>Category</th>\n              <th>Brand</th>\n              <th>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {products.map((product) => (\n              <tr key={product._id}>\n                <td>{product._id}</td>\n                <td>{product.product_name}</td>\n                <td>{product.product_price}</td>\n                <td>{product.category_id}</td>\n                <td>{product.brand}</td>\n                <td>\n                  <button\n                    className=\"btn btn btn-primary\" onClick={() => openModal(product)}\n                  >\n                    Edit\n                  </button>{' '}\n                  <button\n                    className=\"btn btn btn-danger\"\n                    onClick={() => deleteHandler(product)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\nexport default ProductsScreen;\n"]},"metadata":{},"sourceType":"module"}